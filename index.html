<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Dagens schema</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    h1 { margin-bottom: 10px; }
    #clock { font-family: monospace; font-size: 18px; margin-bottom: 15px; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #f2f2f2; }
    td.aktivitet { font-weight: bold; }
  </style>
</head>
<body>
  <h1>Dagens schema</h1>
  <div id="clock"></div>

  <table id="schema">
    <thead>
      <tr>
        <th>Start</th>
        <th>Slut</th>
        <th>Aktivitet</th>
        <th>Deltagare</th>
        <th>Coach</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

<script>
// --- f√§rger & emojis (din gamla logik) ---
const aktivitetFarger = {
  "M√•ndagsm√∂te":     {color:"#AED6F1", emoji:"üìÖ"},
  "Gruppm√∂te":       {color:"#7FB3D5", emoji:"üë•"},
  "Lunch":           {color:"#F9E79F", emoji:"üç≤"},
  "Frukost":         {color:"#FAD7A0", emoji:"ü•ê"},
  "Atelj√©":          {color:"#F5CBA7", emoji:"üé®"},
  "Musik":           {color:"#D2B4DE", emoji:"üé∂"},
  "Pod":             {color:"#A9CCE3", emoji:"üéôÔ∏è"},
  "Padel":           {color:"#82E0AA", emoji:"üèì"},
  "Gym":             {color:"#A3E4D7", emoji:"üèãÔ∏è‚Äç‚ôÇÔ∏è"},
  "Film":            {color:"#E6B0AA", emoji:"üé¨"},
  "Behandling":      {color:"#EDBB99", emoji:"üíÜ"},
  "Handla":          {color:"#ABEBC6", emoji:"üõçÔ∏è"},
  "Uppstart":        {color:"#F0B27A", emoji:"üöÄ"},
  "Poesigruppen":    {color:"#F1948A", emoji:"‚úçÔ∏è"},
  "Trummor":         {color:"#F1948A", emoji:"ü•Å"},
  "Rollspel":        {color:"#BB8FCE", emoji:"üêâ"},
  "√Öterkoppling":    {color:"#85C1E9", emoji:"üîÑ"},
  "Medicin":         {color:"#E59866", emoji:"üíä"},
  "Biljard":         {color:"#A9DFBF", emoji:"üé±"},
  "Spelgruppen":     {color:"#F8C471", emoji:"üé≤"},
  "S√∂mnad":          {color:"#F5EEF8", emoji:"üßµ"}
};

// --- h√§mta schema fr√•n Apps Script ---
async function loadSchema() {
  const url = "https://script.google.com/macros/s/AKfycbzujIM80MWW1nsKDPySb4M0m2ylvUWk_SBko5Q_SJGfWJmcROFAxWf0jNjFi-nBVcA/exec"; 
  try {
    const res = await fetch(url);
    const json = await res.json();
    const tbody = document.querySelector("#schema tbody");
    tbody.innerHTML = "";

    json.data.forEach(row => {
      const tr = document.createElement("tr");
      const [start, slut, aktivitet, deltagare, coach] = row;

      // f√§rg & emoji
      const fargEmoji = aktivitetFarger[aktivitet] || {color:"#fff", emoji:""};
      const aktivitetText = (fargEmoji.emoji ? fargEmoji.emoji + " " : "") + aktivitet;

      tr.innerHTML = `
        <td>${start}</td>
        <td>${slut}</td>
        <td class="aktivitet" style="background:${fargEmoji.color}">${aktivitetText}</td>
        <td>${deltagare}</td>
        <td>${coach}</td>
      `;
      tbody.appendChild(tr);
    });
  } catch (err) {
    console.error("Fel vid h√§mtning:", err);
  }
}

// --- klocka ---
function updateClock() {
  const now = new Date();
  document.getElementById("clock").textContent =
    now.toLocaleDateString("sv-SE", { weekday: "long", year: "numeric", month: "long", day: "numeric" }) +
    " " +
    now.toLocaleTimeString("sv-SE", { hour: "2-digit", minute: "2-digit", second: "2-digit" });
}

setInterval(updateClock, 1000);
updateClock();
loadSchema();
</script>
</body>
</html>
